<ui:composition xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                template="/web/template/innerLayout.xhtml"
                xmlns:mc="http://java.sun.com/jsf/composite/reusables">

	<ui:param name="paramBackBean" value="#{programacionMantenimientoBackBean}"/>
	<ui:define name="headerContent">
		Mantenimiento Preventivo
	</ui:define>
	<ui:define name="content">
		<div id="ContainerIndent">
			<div class="Container100 Responsive">
				<h:form id="formGralMantenimiento" style="width: 100%;">
				<p:panel  styleClass="fondoPaneles" >
					<f:facet name="header">
						<h:outputText value="ID:" />
						<p:outputPanel style="display:block" styleClass="right">
							<p:commandButton widgetVar="btnaddUser"  icon="fa-plus-square" value="Agregar Usuario" disabled="true" id="addUser"  oncomplete="PF('winProgMto').show();"/>
							<p:commandButton widgetVar="btnGuardar"  icon="ui-icon-disk" value="#{labelName.btnGuardar}" onstart="PF('btnGuardar').disable();" oncomplete="PF('btnGuardar').enable();" action="#{programacionMantenimientoBackBean.guardar}"/>
							<p:commandButton resetValues="true" ajax="true" value="#{labelName.btnCancelar}" icon="ui-icon-cancel" />	
						</p:outputPanel>
					</f:facet>
					<p:panel id="panelgenerales" styleClass="fondoPaneles" >
						<h:panelGrid columns="6" cellpadding="5" columnClasses="Wid20,Wid40,Wid10,Wid10,Wid10,Wid10" style="width:100%" >
	           				<p:outputLabel for="txtlistamantenimientos" value="Mantenimientos Programados"/>
	           				<p:selectOneMenu  required="true" id="txtlistamantenimientos" label="Mantenimientos Programados" value="#{programacionMantenimientoBackBean.mantenimientoprogId}" effect="fold" style="width:88%" >
							<p:ajax listener="#{programacionMantenimientoBackBean.cargarFechasMto}" update="desde,hasta"/>
							<f:selectItem itemValue="#{null}" itemLabel="Seleccione ..."/>
							<f:selectItems var="oMantenimiento" value="#{programacionMantenimientoBackBean.listaMantenimientos}" itemLabel="#{oMantenimiento.fechaInicio} - #{oMantenimiento.asunto} - #{oMantenimiento.delegacion}" itemValue="#{oMantenimiento.id}" style="width:90%"/>
							</p:selectOneMenu>	
							<p:outputLabel for="desde" value="Fecha Inicio:" />
						    <p:calendar id="desde" effect="fold"  pattern="dd/MM/yyyy" mask="true" required="true" value="#{programacionMantenimientoBackBean.fechaInicio}"/>
						    <p:outputLabel for="hasta" value="Fecha Fin:" />
						    <p:calendar id="hasta" effect="fold"  pattern="dd/MM/yyyy" mask="true" required="true" value="#{programacionMantenimientoBackBean.fechaFin}"/>
	       				</h:panelGrid>
       				</p:panel>
					
					<div class="Container50 Responsive">
					    <p:dataTable id="tablaempleados" var="oUsuario" value="#{programacionMantenimientoBackBean.listaMantenimientos}" style="height:570px">
					        <f:facet name="header">
					            Usuarios asociados al Mantenimiento
					        </f:facet>
					        <p:column headerText="Usuario">
					            <h:outputText value="#{oUsuario.asunto}" />
					        </p:column>
					        <p:column headerText="Cargo">
					            <h:outputText value="#{oUsuario.asunto}" />
					        </p:column>
					        <p:column headerText="Area">
					            <h:outputText value="#{oUsuario.asunto}" />
					        </p:column>
					        <p:column headerText="Delegacion">
					            <h:outputText value="#{oUsuario.asunto}" />
					        </p:column>
					    </p:dataTable>
					</div>
					<div class="Container50 Responsive">
					
					</div> 
					
					<p:dialog widgetVar="winProgMto" header="Detalle del Mantenimiento" resizable="false" width="900" height="500"  modal="true">
					  <p:panel id="panelusuario" styleClass="fondoPaneles" >
        				<h:panelGrid columns="2" cellpadding="5" columnClasses="Wid10,Wid90" >
        				  <p:graphicImage library="default" name="img/icons/comunes/user.png" width="100px"/>
        				   <h:panelGrid columns="1" style="width:100%" columnClasses="Wid100">
        				  		<h:panelGrid columns="3" style="width:100%" columnClasses="Wid10, Wid70,Wid10">
            					<p:outputLabel for="txtEmpleadoDest" value="Empleado "/>
            					<p:inputText id="txtEmpleadoDest" maxlength="50" readonly="true" styleClass="Wid100" value="#{movimientosActivosBackBean.txtEmpleadoDest}"/>
            					<p:commandButton  icon="ui-icon-search" onclick="PF('busquedaAvanzadaEmpleado').show();"/>
            					</h:panelGrid>
            					<h:panelGrid columns="2" style="width:100%" columnClasses="Wid10, Wid90">
            					<p:outputLabel for="txtcargoEmpleadoDest" value="Cargo"/>
            					<p:inputText id="txtcargoEmpleadoDest" maxlength="50" readonly="true" styleClass="Wid90" value="#{movimientosActivosBackBean.txtcargoEmpleadoDest}"/>
            					<p:outputLabel for="txtubicacionEmpleadoDest" value="Ubicación"/>
            					<p:inputText id="txtubicacionEmpleadoDest" maxlength="50" readonly="true" styleClass="Wid90" value="#{movimientosActivosBackBean.txtubicacionEmpleadoDest}"/>
            					</h:panelGrid>
            				</h:panelGrid>
            			</h:panelGrid>
						<p:dataTable id="tablaactivosinf" var="oActivosInf" value="#{programacionMantenimientoBackBean.listaMantenimientos}" style="height:350px">
					        <f:facet name="header">
					           Activos Informáticos asociados al Usuario
					        </f:facet>
					        <p:column headerText="Usuario">
					            <h:outputText value="#{oActivosInf.asunto}" />
					        </p:column>
					        <p:column headerText="Cargo">
					            <h:outputText value="#{oActivosInf.asunto}" />
					        </p:column>
					        <p:column headerText="Area">
					            <h:outputText value="#{oActivosInf.asunto}" />
					        </p:column>
					        <p:column headerText="Delegacion">
					            <h:outputText value="#{oActivosInf.asunto}" />
					        </p:column>
					    </p:dataTable>
        			</p:panel>
						 
					</p:dialog>
				</p:panel>
				
					
				</h:form>
			</div>
			
			
		</div>
		<mc:buscaEmpleado nombreModal="busquedaAvanzadaEmpleado" componentesActualizar=":formGralMantenimiento:panelusuario" backBeanBase="#{movimientosActivosBackBean}" />
	</ui:define> 
</ui:composition>
			